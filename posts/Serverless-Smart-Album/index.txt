2:I[50316,["8173","static/chunks/8173-53777d1212e6c2a1.js","231","static/chunks/231-b684ef6c6a321bb5.js","1068","static/chunks/1068-de3bc04ff7214d06.js","333","static/chunks/app/posts/%5Bslug%5D/page-b91ef33f0c6160da.js"],"WidgetsRoot"]
3:I[231,["8173","static/chunks/8173-53777d1212e6c2a1.js","231","static/chunks/231-b684ef6c6a321bb5.js","1068","static/chunks/1068-de3bc04ff7214d06.js","333","static/chunks/app/posts/%5Bslug%5D/page-b91ef33f0c6160da.js"],""]
4:I[32741,["8173","static/chunks/8173-53777d1212e6c2a1.js","231","static/chunks/231-b684ef6c6a321bb5.js","1068","static/chunks/1068-de3bc04ff7214d06.js","333","static/chunks/app/posts/%5Bslug%5D/page-b91ef33f0c6160da.js"],"Code"]
5:I[39275,[],""]
7:I[61343,[],""]
8:I[82650,["8173","static/chunks/8173-53777d1212e6c2a1.js","231","static/chunks/231-b684ef6c6a321bb5.js","3185","static/chunks/app/layout-575b5c0b944e811a.js"],"ThemeProvider"]
9:I[50558,["8173","static/chunks/8173-53777d1212e6c2a1.js","231","static/chunks/231-b684ef6c6a321bb5.js","3185","static/chunks/app/layout-575b5c0b944e811a.js"],"default"]
a:I[40289,["8173","static/chunks/8173-53777d1212e6c2a1.js","231","static/chunks/231-b684ef6c6a321bb5.js","3185","static/chunks/app/layout-575b5c0b944e811a.js"],"Dipsyland"]
b:I[94074,["3954","static/chunks/d3ac728e-4f9f0688fd11b799.js","8173","static/chunks/8173-53777d1212e6c2a1.js","3158","static/chunks/3158-60beff0974f44667.js","3530","static/chunks/3530-0259f1a7e7bea590.js","1931","static/chunks/app/page-64e37caa71af8afa.js"],"SvgLink"]
6:["slug","Serverless-Smart-Album","d"]
0:["kqO7dsnLKSeDofJ3fqMAE",[[["",{"children":["posts",{"children":[["slug","Serverless-Smart-Album","d"],{"children":["__PAGE__?{\"slug\":\"Serverless-Smart-Album\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["posts",{"children":[["slug","Serverless-Smart-Album","d"],{"children":["__PAGE__",{},[["$L1",["$","div",null,{"className":"card text-left relative p-20 max-w-4xl min-h-[calc(var(--section-height) - 10rem * 2)] mx-auto my-40 overflow-hidden shadow-xl","children":[["$","h1",null,{"children":"Serverless Smart Album"}],["$","time",null,{"className":"my-4 block text-sm text-zinc-400","dateTime":"2019-12-07T00:00:00.000Z","children":"December 7, 2019"}],["$","article",null,{"className":"prose dark:prose-invert max-w-[90ch]","children":["$","$L2",null,{"children":[["$","h1",null,{"id":"serverless-smart-album","children":[["$","$L3",null,{"href":"#serverless-smart-album","children":["$","span",null,{"className":"icon icon-link"}]}],""]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["Course project of COMP4651 - Cloud Computing and Big Data Systems\nAuthors: ",["$","$L3",null,{"href":"//github.com/danvim","children":"Daniel Cheung"}],", ",["$","$L3",null,{"href":"//github.com/dipsywong98","children":"Dipsy Wong"}],", ",["$","$L3",null,{"href":"//github.com/mcreng","children":"Peter Tse"}],"\nRepo: ",["$","$L3",null,{"href":"https://github.com/mcreng/serverless-smart-album","children":"https://github.com/mcreng/serverless-smart-album"}]]}],"\n"]}],"\n",["$","h2",null,{"id":"introduction","children":[["$","$L3",null,{"href":"#introduction","children":["$","span",null,{"className":"icon icon-link"}]}],"Introduction"]}],"\n",["$","p",null,{"children":"We have re-implemented the Image Recognition example [1] provided by AWS in open source alternatives."}],"\n",["$","p",null,{"children":["$","img",null,{"src":"https://i.imgur.com/4hvAbV3.png","alt":""}]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["$","em",null,{"children":"Figure 1 System Architecture of AWS Image Recognition Pipeline"}]}],"\n"]}],"\n",["$","p",null,{"children":"In particular, we have replaced:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Amazon S3 with Redis"}],"\n",["$","li",null,{"children":"Amazon DynamoDB with MongoDB"}],"\n",["$","li",null,{"children":"AWS Lambda with OpenFaaS functions"}],"\n",["$","li",null,{"children":"Amazon Rekognition with PyTorch"}],"\n"]}],"\n",["$","p",null,{"children":"We did not mirror the abilities of AWS Step Function. Instead, the flow is directly implemented inside each OpenFaaS functions."}],"\n",["$","p",null,{"children":"Most of the AWS Lambdas are translated into OpenFaaS functions written in Node.js and Python. The image thumbnail generation was done on Node.js while the object recognition was done using Python and PyTorch with the Yolov3-tiny model. We did not implement meta-data extraction because we find this function is less useful."}],"\n",["$","h2",null,{"id":"implementation","children":[["$","$L3",null,{"href":"#implementation","children":["$","span",null,{"className":"icon icon-link"}]}],"Implementation"]}],"\n",["$","h3",null,{"id":"web-client","children":[["$","$L3",null,{"href":"#web-client","children":["$","span",null,{"className":"icon icon-link"}]}],"Web Client"]}],"\n",["$","p",null,{"children":"This function renders a static single page web application using React, interfacing with the user, allowing users to manage albums and photos. Requests are sent to other functions for processing via AJAX."}],"\n",["$","h3",null,{"id":"storage","children":[["$","$L3",null,{"href":"#storage","children":["$","span",null,{"className":"icon icon-link"}]}],"Storage"]}],"\n",["$","p",null,{"children":"This mirrors the AWS S3 service to allow users to upload and retrieve data in a key-value pair manner. This is implemented using a Redis instance. This function exposes a REST API endpoint:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Show: Retrieve a value using a key from Redis"}],"\n",["$","li",null,{"children":"Store: Update a key-value pair to Redis"}],"\n"]}],"\n",["$","h3",null,{"id":"albums","children":[["$","$L3",null,{"href":"#albums","children":["$","span",null,{"className":"icon icon-link"}]}],"Albums"]}],"\n",["$","p",null,{"children":"Allows users to manage albums. This function exposes a REST API endpoint:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Index: List all albums"}],"\n",["$","li",null,{"children":"Show: Display details of one album by the album ID"}],"\n",["$","li",null,{"children":"Store: Create a new album"}],"\n"]}],"\n",["$","h3",null,{"id":"photos","children":[["$","$L3",null,{"href":"#photos","children":["$","span",null,{"className":"icon icon-link"}]}],"Photos"]}],"\n",["$","p",null,{"children":"Allows users to manage photos. This function exposes a REST API endpoint:"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Show: Display details of one photo by its ID"}],"\n",["$","li",null,{"children":"Store: Create a new photo"}],"\n"]}],"\n",["$","h3",null,{"id":"thumbnail","children":[["$","$L3",null,{"href":"#thumbnail","children":["$","span",null,{"className":"icon icon-link"}]}],"Thumbnail"]}],"\n",["$","p",null,{"children":"This is a thumbnail generator function implemented using Node.js smartcropjs library. To obtain a thumbnail, POST request the function with application/text header with a Redis key to the image or image Data URI as body, then the function returns a Redis key to the thumbnail or thumbnail Data URI respectively."}],"\n",["$","h3",null,{"id":"recognition","children":[["$","$L3",null,{"href":"#recognition","children":["$","span",null,{"className":"icon icon-link"}]}],"Recognition"]}],"\n",["$","p",null,{"children":"This module is replaced with a Yolov3-tiny model written in PyTorch. It takes a POST request as input, which specifies a list of Redis keys of the images. After the model inference, the function returns an JSON object specifying the locations and confidence levels of each detected object in each image."}],"\n",["$","p",null,{"children":["$","img",null,{"src":"https://i.imgur.com/nafn0RO.png","alt":""}]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["$","em",null,{"children":"Figure 2 Uploading a new photo"}]}],"\n"]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"https://i.imgur.com/ht1b24l.png","alt":""}]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["$","em",null,{"children":"Figure 3 Creating a new album"}]}],"\n"]}],"\n",["$","h2",null,{"id":"setupremoval","children":[["$","$L3",null,{"href":"#setupremoval","children":["$","span",null,{"className":"icon icon-link"}]}],"Setup/Removal"]}],"\n",["$","p",null,{"children":"This project is easily deployable to any Kubernetes clusters. Commands are executed in the project root folder."}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"Install OpenFaaS in Kubernetes, if not present."}],"\n",["$","li",null,{"children":"Setup a local docker repository, if not present. Change the repository host in ./stack.yml accordingly. Default is localhost:32000."}],"\n",["$","li",null,{"children":"Setup the necessary helm services by sh ./scripts/helm-up.sh."}],"\n",["$","li",null,{"children":"Deploy the serverless functions by faas-cli up."}],"\n"]}],"\n",["$","p",null,{"children":"This project can then be removed with ease."}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"Remove the serverless functions by faas-cli rm."}],"\n",["$","li",null,{"children":"Remove the helm services by sh ./script/helm-down.sh."}],"\n",["$","li",null,{"children":"(Optional) Remove the local docker repository"}],"\n",["$","li",null,{"children":"(Optional) Remove OpenFaaS."}],"\n"]}],"\n",["$","h2",null,{"id":"demonstration","children":[["$","$L3",null,{"href":"#demonstration","children":["$","span",null,{"className":"icon icon-link"}]}],"Demonstration"]}],"\n",["$","p",null,{"children":"Here we give a simple demonstration of our project."}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["After setting everything up, we can login to our web interface by visiting ",["$","$L4",null,{"children":"<openfaas-host>/function/recognition-web"}],". We can login by entering a username.\n",["$","img",null,{"src":"https://i.imgur.com/a3uG8f6.png","alt":""}]]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["After logging in, we can see all the albums uploaded under this user.\n",["$","img",null,{"src":"https://i.imgur.com/Fihz9Kz.png","alt":""}]]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["We can create a new album by entering an album name and clicking ‘New Album’. Some example images may be found in ./yolov3/data/samples/*.jpg.\n",["$","img",null,{"src":"https://i.imgur.com/sw9Mfle.png","alt":""}]]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["We can then upload images to this album. After an image is uploaded, its thumbnail (generated from our thumbnail function), its tags (generated from our yolov3 function) and its upload date are shown.\n",["$","img",null,{"src":"https://i.imgur.com/rynZ6Np.png","alt":""}]]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["By clicking onto the thumbnail, we can see the original image.\n",["$","img",null,{"src":"https://i.imgur.com/kpyjA4A.png","alt":""}]]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["We can go back to the main screen and view the created album by clicking ‘Albums’ in the top navigation bar.\n",["$","img",null,{"src":"https://i.imgur.com/isfNZHp.png","alt":""}]]}],"\n"]}],"\n"]}],"\n",["$","h2",null,{"id":"references","children":[["$","$L3",null,{"href":"#references","children":["$","span",null,{"className":"icon icon-link"}]}],"References"]}],"\n",["$","p",null,{"children":["1: ",["$","$L3",null,{"href":"https://github.com/aws-samples/lambda-refarch-imagerecognition","children":"https://github.com/aws-samples/lambda-refarch-imagerecognition"}]]}]]}]}]]}]],null],null]},["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children","$6","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"en","children":["$","body",null,{"children":["$","$L8",null,{"attribute":"class","defaultTheme":"dark","children":[["$","header",null,{"id":"head","children":["$","header",null,{"className":"fixed top-0 w-full z-10 shadow-lg","children":["$","nav",null,{"children":["$","div",null,{"className":"flex justify-between items-center px-16 bg-nav text-nav-foreground","children":[["$","div",null,{"className":"flex items-center","children":[["$","$L3",null,{"className":"nav-item transition-all hover:bg-foreground/10 title px-3","href":"/#home","children":"Dipsyland"}],["$","$L3",null,{"className":"nav-item transition-all hover:bg-foreground/10","href":"/#about","children":"About Me"}],["$","$L3",null,{"className":"nav-item transition-all hover:bg-foreground/10","href":"/#works","children":"Works"}],["$","$L3",null,{"className":"nav-item transition-all hover:bg-foreground/10","href":"/#blog","children":"Blog"}],["$","$L3",null,{"className":"nav-item transition-all hover:bg-foreground/10","href":"/#about","children":"Contact"}]]}],["$","div",null,{"children":["$","$L9",null,{}]}]]}]}]}]}],["$","main",null,{"id":"content","children":[["$","div",null,{"id":"home"}],["$","$La",null,{}],["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}],["$","footer",null,{"className":"bg-background/30 text-foreground backgrop-satuate-100 backdrop-blur-sm shadow py-8","children":["$","div",null,{"className":"flex justify-between container py-8 items-center","children":[["$","div",null,{"className":"flex flex-col space-y-2","children":"Make with love by Dipsy, Copyright© 2024 All Right Reserved"}],["$","div",null,{"className":"flex space-x-4","children":[["$","$Lb","Facebook",{"href":"//www.facebook.com/FK.twf/","icon":"facebook","color":"#1877F2","title":"Facebook"}],["$","$Lb","GitHub",{"href":"//github.com/dipsywong98","icon":"github","color":"#181717","title":"GitHub"}],["$","$Lb","LinkedIn",{"href":"//www.linkedin.com/in/dipsywong/","icon":"linkedin","color":"#0077B5","title":"LinkedIn"}],["$","$Lb","Email",{"href":"mailto:ycwongal@connect.ust.hk","icon":"gmail","color":"#D14836","title":"Email"}],["$","$Lb","YouTube",{"href":"//www.youtube.com/user/FacebookArmyOffical","icon":"youtube","color":"#FF0000","title":"YouTube"}]]}]]}]}]]}]]}]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/d1e1d355410e933b.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/b1044f11627f501d.css","precedence":"next","crossOrigin":"$undefined"}]],"$Lc"]]]]
c:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Serverless Smart Album | Dipsyland"}],["$","meta","3",{"name":"description","content":"Smart album that auto label photos on cloud"}],["$","link","4",{"rel":"canonical","href":"https://dipsy.me/posts/Serverless-Smart-Album/"}],["$","meta","5",{"property":"og:title","content":"Serverless Smart Album"}],["$","meta","6",{"property":"og:description","content":"Smart album that auto label photos on cloud"}],["$","meta","7",{"property":"og:url","content":"https://dipsy.me/posts/Serverless-Smart-Album/"}],["$","meta","8",{"property":"og:type","content":"article"}],["$","meta","9",{"property":"article:published_time","content":"2019-12-07T00:00:00.000Z"}],["$","meta","10",{"name":"twitter:card","content":"summary"}],["$","meta","11",{"name":"twitter:title","content":"Serverless Smart Album"}],["$","meta","12",{"name":"twitter:description","content":"Smart album that auto label photos on cloud"}],["$","link","13",{"rel":"icon","href":"/icon.png?053fff2283a75f27","type":"image/png","sizes":"96x96"}]]
1:null
