<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="https://i.imgur.com/4hvAbV3.png"/><link rel="preload" as="image" href="https://i.imgur.com/nafn0RO.png"/><link rel="preload" as="image" href="https://i.imgur.com/ht1b24l.png"/><link rel="preload" as="image" href="https://i.imgur.com/a3uG8f6.png"/><link rel="preload" as="image" href="https://i.imgur.com/Fihz9Kz.png"/><link rel="preload" as="image" href="https://i.imgur.com/sw9Mfle.png"/><link rel="preload" as="image" href="https://i.imgur.com/rynZ6Np.png"/><link rel="preload" as="image" href="https://i.imgur.com/kpyjA4A.png"/><link rel="preload" as="image" href="https://i.imgur.com/isfNZHp.png"/><link rel="stylesheet" href="/_next/static/css/d1e1d355410e933b.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/b1044f11627f501d.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-f6d831f5b8f364ac.js"/><script src="/_next/static/chunks/fd9d1056-ad3f9809e3f77200.js" async=""></script><script src="/_next/static/chunks/7023-0789e080c5116e54.js" async=""></script><script src="/_next/static/chunks/main-app-f18ac9dfa8c42f92.js" async=""></script><script src="/_next/static/chunks/8173-53777d1212e6c2a1.js" async=""></script><script src="/_next/static/chunks/231-b684ef6c6a321bb5.js" async=""></script><script src="/_next/static/chunks/1068-de3bc04ff7214d06.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bslug%5D/page-b91ef33f0c6160da.js" async=""></script><script src="/_next/static/chunks/app/layout-575b5c0b944e811a.js" async=""></script><script src="/_next/static/chunks/d3ac728e-4f9f0688fd11b799.js" async=""></script><script src="/_next/static/chunks/3158-60beff0974f44667.js" async=""></script><script src="/_next/static/chunks/3530-0259f1a7e7bea590.js" async=""></script><script src="/_next/static/chunks/app/page-64e37caa71af8afa.js" async=""></script><title>Serverless Smart Album | Dipsyland</title><meta name="description" content="Smart album that auto label photos on cloud"/><link rel="canonical" href="https://dipsy.me/posts/Serverless-Smart-Album/"/><meta property="og:title" content="Serverless Smart Album"/><meta property="og:description" content="Smart album that auto label photos on cloud"/><meta property="og:url" content="https://dipsy.me/posts/Serverless-Smart-Album/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2019-12-07T00:00:00.000Z"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Serverless Smart Album"/><meta name="twitter:description" content="Smart album that auto label photos on cloud"/><link rel="icon" href="/icon.png?053fff2283a75f27" type="image/png" sizes="96x96"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&false)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}else{c.add('dark')}if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'dark'}catch(e){}}()</script><header id="head"><header class="fixed top-0 w-full z-10 shadow-lg"><nav><div class="flex justify-between items-center px-16 bg-nav text-nav-foreground"><div class="flex items-center"><a class="nav-item transition-all hover:bg-foreground/10 title px-3" href="/#home">Dipsyland</a><a class="nav-item transition-all hover:bg-foreground/10" href="/#about">About Me</a><a class="nav-item transition-all hover:bg-foreground/10" href="/#works">Works</a><a class="nav-item transition-all hover:bg-foreground/10" href="/#blog">Blog</a><a class="nav-item transition-all hover:bg-foreground/10" href="/#about">Contact</a></div><div><button type="button" aria-label="Toggle theme" class="group rounded-full bg-white/50 px-3 py-2 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:bg-zinc-800/90 dark:ring-white/10 dark:hover:ring-white/20"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-6 w-6 fill-zinc-80 stroke-zinc-500 transition group-hover:fill-zinc-200 group-hover:stroke-zinc-700 dark:hidden [@media(prefers-color-scheme:dark)]:fill-zinc-50 [@media(prefers-color-scheme:dark)]:stroke-zinc-500 [@media(prefers-color-scheme:dark)]:group-hover:fill-zinc-50 [@media(prefers-color-scheme:dark)]:group-hover:stroke-zinc-600"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon-star hidden h-6 w-6 fill-zinc-700 stroke-zinc-500 transition dark:block [@media(prefers-color-scheme:dark)]:group-hover:stroke-zinc-400 [@media_not_(prefers-color-scheme:dark)]:fill-zinc-400/10 [@media_not_(prefers-color-scheme:dark)]:stroke-zinc-500"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9"></path><path d="M20 3v4"></path><path d="M22 5h-4"></path></svg></button></div></div></nav></header></header><main id="content"><div id="home"></div><div class="dipsyland root-el relative"><div class="container-el fixed w-full overflow-hidden"><div class="background-img sky"></div><div class="background-img cloud" style="margin-left:0px;bottom:-50px"></div><div class="background-img city" style="margin-left:0px;bottom:-50px"></div><div class="background-img grass" style="margin-left:0px;bottom:-50px"></div></div></div><div class="card text-left relative p-20 max-w-4xl min-h-[calc(var(--section-height) - 10rem * 2)] mx-auto my-40 overflow-hidden shadow-xl"><h1>Serverless Smart Album</h1><time class="my-4 block text-sm text-zinc-400" dateTime="2019-12-07T00:00:00.000Z">December 7, 2019</time><article class="prose dark:prose-invert max-w-[90ch]"><h1 id="serverless-smart-album"><a href="#serverless-smart-album"><span class="icon icon-link"></span></a></h1>
<blockquote>
<p>Course project of COMP4651 - Cloud Computing and Big Data Systems
Authors: <a href="//github.com/danvim/">Daniel Cheung</a>, <a href="//github.com/dipsywong98/">Dipsy Wong</a>, <a href="//github.com/mcreng/">Peter Tse</a>
Repo: <a href="https://github.com/mcreng/serverless-smart-album">https://github.com/mcreng/serverless-smart-album</a></p>
</blockquote>
<h2 id="introduction"><a href="#introduction"><span class="icon icon-link"></span></a>Introduction</h2>
<p>We have re-implemented the Image Recognition example [1] provided by AWS in open source alternatives.</p>
<p><img src="https://i.imgur.com/4hvAbV3.png" alt=""/></p>
<blockquote>
<p><em>Figure 1 System Architecture of AWS Image Recognition Pipeline</em></p>
</blockquote>
<p>In particular, we have replaced:</p>
<ul>
<li>Amazon S3 with Redis</li>
<li>Amazon DynamoDB with MongoDB</li>
<li>AWS Lambda with OpenFaaS functions</li>
<li>Amazon Rekognition with PyTorch</li>
</ul>
<p>We did not mirror the abilities of AWS Step Function. Instead, the flow is directly implemented inside each OpenFaaS functions.</p>
<p>Most of the AWS Lambdas are translated into OpenFaaS functions written in Node.js and Python. The image thumbnail generation was done on Node.js while the object recognition was done using Python and PyTorch with the Yolov3-tiny model. We did not implement meta-data extraction because we find this function is less useful.</p>
<h2 id="implementation"><a href="#implementation"><span class="icon icon-link"></span></a>Implementation</h2>
<h3 id="web-client"><a href="#web-client"><span class="icon icon-link"></span></a>Web Client</h3>
<p>This function renders a static single page web application using React, interfacing with the user, allowing users to manage albums and photos. Requests are sent to other functions for processing via AJAX.</p>
<h3 id="storage"><a href="#storage"><span class="icon icon-link"></span></a>Storage</h3>
<p>This mirrors the AWS S3 service to allow users to upload and retrieve data in a key-value pair manner. This is implemented using a Redis instance. This function exposes a REST API endpoint:</p>
<ul>
<li>Show: Retrieve a value using a key from Redis</li>
<li>Store: Update a key-value pair to Redis</li>
</ul>
<h3 id="albums"><a href="#albums"><span class="icon icon-link"></span></a>Albums</h3>
<p>Allows users to manage albums. This function exposes a REST API endpoint:</p>
<ul>
<li>Index: List all albums</li>
<li>Show: Display details of one album by the album ID</li>
<li>Store: Create a new album</li>
</ul>
<h3 id="photos"><a href="#photos"><span class="icon icon-link"></span></a>Photos</h3>
<p>Allows users to manage photos. This function exposes a REST API endpoint:</p>
<ul>
<li>Show: Display details of one photo by its ID</li>
<li>Store: Create a new photo</li>
</ul>
<h3 id="thumbnail"><a href="#thumbnail"><span class="icon icon-link"></span></a>Thumbnail</h3>
<p>This is a thumbnail generator function implemented using Node.js smartcropjs library. To obtain a thumbnail, POST request the function with application/text header with a Redis key to the image or image Data URI as body, then the function returns a Redis key to the thumbnail or thumbnail Data URI respectively.</p>
<h3 id="recognition"><a href="#recognition"><span class="icon icon-link"></span></a>Recognition</h3>
<p>This module is replaced with a Yolov3-tiny model written in PyTorch. It takes a POST request as input, which specifies a list of Redis keys of the images. After the model inference, the function returns an JSON object specifying the locations and confidence levels of each detected object in each image.</p>
<p><img src="https://i.imgur.com/nafn0RO.png" alt=""/></p>
<blockquote>
<p><em>Figure 2 Uploading a new photo</em></p>
</blockquote>
<p><img src="https://i.imgur.com/ht1b24l.png" alt=""/></p>
<blockquote>
<p><em>Figure 3 Creating a new album</em></p>
</blockquote>
<h2 id="setupremoval"><a href="#setupremoval"><span class="icon icon-link"></span></a>Setup/Removal</h2>
<p>This project is easily deployable to any Kubernetes clusters. Commands are executed in the project root folder.</p>
<ol>
<li>Install OpenFaaS in Kubernetes, if not present.</li>
<li>Setup a local docker repository, if not present. Change the repository host in ./stack.yml accordingly. Default is localhost:32000.</li>
<li>Setup the necessary helm services by sh ./scripts/helm-up.sh.</li>
<li>Deploy the serverless functions by faas-cli up.</li>
</ol>
<p>This project can then be removed with ease.</p>
<ol>
<li>Remove the serverless functions by faas-cli rm.</li>
<li>Remove the helm services by sh ./script/helm-down.sh.</li>
<li>(Optional) Remove the local docker repository</li>
<li>(Optional) Remove OpenFaaS.</li>
</ol>
<h2 id="demonstration"><a href="#demonstration"><span class="icon icon-link"></span></a>Demonstration</h2>
<p>Here we give a simple demonstration of our project.</p>
<ol>
<li>
<p>After setting everything up, we can login to our web interface by visiting <code title="Click to copy">&lt;openfaas-host&gt;/function/recognition-web</code>. We can login by entering a username.
<img src="https://i.imgur.com/a3uG8f6.png" alt=""/></p>
</li>
<li>
<p>After logging in, we can see all the albums uploaded under this user.
<img src="https://i.imgur.com/Fihz9Kz.png" alt=""/></p>
</li>
<li>
<p>We can create a new album by entering an album name and clicking ‘New Album’. Some example images may be found in ./yolov3/data/samples/*.jpg.
<img src="https://i.imgur.com/sw9Mfle.png" alt=""/></p>
</li>
<li>
<p>We can then upload images to this album. After an image is uploaded, its thumbnail (generated from our thumbnail function), its tags (generated from our yolov3 function) and its upload date are shown.
<img src="https://i.imgur.com/rynZ6Np.png" alt=""/></p>
</li>
<li>
<p>By clicking onto the thumbnail, we can see the original image.
<img src="https://i.imgur.com/kpyjA4A.png" alt=""/></p>
</li>
<li>
<p>We can go back to the main screen and view the created album by clicking ‘Albums’ in the top navigation bar.
<img src="https://i.imgur.com/isfNZHp.png" alt=""/></p>
</li>
</ol>
<h2 id="references"><a href="#references"><span class="icon icon-link"></span></a>References</h2>
<p>1: <a href="https://github.com/aws-samples/lambda-refarch-imagerecognition">https://github.com/aws-samples/lambda-refarch-imagerecognition</a></p></article></div><footer class="bg-background/30 text-foreground backgrop-satuate-100 backdrop-blur-sm shadow py-8"><div class="flex justify-between container py-8 items-center"><div class="flex flex-col space-y-2">Make with love by Dipsy, Copyright© 2024 All Right Reserved</div><div class="flex space-x-4"><div class="tooltip-root"><div class="title" style="opacity:0">Facebook</div><a href="//www.facebook.com/FK.twf/"><img alt="icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/svg/facebook.svg"/></a></div><div class="tooltip-root"><div class="title" style="opacity:0">GitHub</div><a href="//github.com/dipsywong98"><img alt="icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/svg/github.svg"/></a></div><div class="tooltip-root"><div class="title" style="opacity:0">LinkedIn</div><a href="//www.linkedin.com/in/dipsywong/"><img alt="icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/svg/linkedin.svg"/></a></div><div class="tooltip-root"><div class="title" style="opacity:0">Email</div><a href="mailto:ycwongal@connect.ust.hk"><img alt="icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/svg/gmail.svg"/></a></div><div class="tooltip-root"><div class="title" style="opacity:0">YouTube</div><a href="//www.youtube.com/user/FacebookArmyOffical"><img alt="icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/svg/youtube.svg"/></a></div></div></div></footer></main><script src="/_next/static/chunks/webpack-f6d831f5b8f364ac.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/d1e1d355410e933b.css\",\"style\"]\n2:HL[\"/_next/static/css/b1044f11627f501d.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[95751,[],\"\"]\n5:I[50316,[\"8173\",\"static/chunks/8173-53777d1212e6c2a1.js\",\"231\",\"static/chunks/231-b684ef6c6a321bb5.js\",\"1068\",\"static/chunks/1068-de3bc04ff7214d06.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-b91ef33f0c6160da.js\"],\"WidgetsRoot\"]\n6:I[231,[\"8173\",\"static/chunks/8173-53777d1212e6c2a1.js\",\"231\",\"static/chunks/231-b684ef6c6a321bb5.js\",\"1068\",\"static/chunks/1068-de3bc04ff7214d06.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-b91ef33f0c6160da.js\"],\"\"]\n7:I[32741,[\"8173\",\"static/chunks/8173-53777d1212e6c2a1.js\",\"231\",\"static/chunks/231-b684ef6c6a321bb5.js\",\"1068\",\"static/chunks/1068-de3bc04ff7214d06.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-b91ef33f0c6160da.js\"],\"Code\"]\n8:I[39275,[],\"\"]\na:I[61343,[],\"\"]\nb:I[82650,[\"8173\",\"static/chunks/8173-53777d1212e6c2a1.js\",\"231\",\"static/chunks/231-b684ef6c6a321bb5.js\",\"3185\",\"static/chunks/app/layout-575b5c0b944e811a.js\"],\"ThemeProvider\"]\nc:I[50558,[\"8173\",\"static/chunks/8173-53777d1212e6c2a1.js\",\"231\",\"static/chunks/231-b684ef6c6a321bb5.js\",\"3185\",\"static/chunks/app/layout-575b5c0b944e811a.js\"],\"default\"]\nd:I[40289,[\"8173\",\"static/chunks/8173-53777d1212e6c2a1.js\",\"231\",\"static/chunks/231-b684ef6c6a321bb5.js\",\"3185\",\"static/chunks/app/layout-575b5c0b944e811a.js\"],\"Dipsyland\"]\ne:I[94074,[\"3954\",\"static/chunks/d3ac728e-4f9f0688fd11b799.js\",\"8173\",\"static/chunks/8173-53777d1212e6c2a1.js\",\"3158\",\"static/chunks/3158-60beff0974f44667.js\",\"3530\",\"static/chunks/3530-0259f1a7e7bea590.js\",\"1931\",\"static/chunks/app/page-64e37caa71af8afa.js\"],\"SvgLink\"]\n10:I[76130,[],\"\"]\n9:[\"slug\",\"Serverless-Smart-Album\",\"d\"]\n11:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d1e1d355410e933b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b1044f11627f501d.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"kqO7dsnLKSeDofJ3fqMAE\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/Serverless-Smart-Album/\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"Serverless-Smart-Album\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"Serverless-Smart-Album\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"Serverless-Smart-Album\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"div\",null,{\"className\":\"card text-left relative p-20 max-w-4xl min-h-[calc(var(--section-height) - 10rem * 2)] mx-auto my-40 overflow-hidden shadow-xl\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"Serverless Smart Album\"}],[\"$\",\"time\",null,{\"className\":\"my-4 block text-sm text-zinc-400\",\"dateTime\":\"2019-12-07T00:00:00.000Z\",\"children\":\"December 7, 2019\"}],[\"$\",\"article\",null,{\"className\":\"prose dark:prose-invert max-w-[90ch]\",\"children\":[\"$\",\"$L5\",null,{\"children\":[[\"$\",\"h1\",null,{\"id\":\"serverless-smart-album\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#serverless-smart-album\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"\"]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Course project of COMP4651 - Cloud Computing and Big Data Systems\\nAuthors: \",[\"$\",\"$L6\",null,{\"href\":\"//github.com/danvim\",\"children\":\"Daniel Cheung\"}],\", \",[\"$\",\"$L6\",null,{\"href\":\"//github.com/dipsywong98\",\"children\":\"Dipsy Wong\"}],\", \",[\"$\",\"$L6\",null,{\"href\":\"//github.com/mcreng\",\"children\":\"Peter Tse\"}],\"\\nRepo: \",[\"$\",\"$L6\",null,{\"href\":\"https://github.com/mcreng/serverless-smart-album\",\"children\":\"https://github.com/mcreng/serverless-smart-album\"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"introduction\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#introduction\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Introduction\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"We have re-implemented the Image Recognition example [1] provided by AWS in open source alternatives.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"https://i.imgur.com/4hvAbV3.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"Figure 1 System Architecture of AWS Image Recognition Pipeline\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"In particular, we have replaced:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Amazon S3 with Redis\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Amazon DynamoDB with MongoDB\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"AWS Lambda with OpenFaaS functions\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Amazon Rekognition with PyTorch\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"We did not mirror the abilities of AWS Step Function. Instead, the flow is directly implemented inside each OpenFaaS functions.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Most of the AWS Lambdas are translated into OpenFaaS functions written in Node.js and Python. The image thumbnail generation was done on Node.js while the object recognition was done using Python and PyTorch with the Yolov3-tiny model. We did not implement meta-data extraction because we find this function is less useful.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"implementation\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#implementation\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Implementation\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"web-client\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#web-client\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Web Client\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This function renders a static single page web application using React, interfacing with the user, allowing users to manage albums and photos. Requests are sent to other functions for processing via AJAX.\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"storage\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#storage\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Storage\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This mirrors the AWS S3 service to allow users to upload and retrieve data in a key-value pair manner. This is implemented using a Redis instance. This function exposes a REST API endpoint:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Show: Retrieve a value using a key from Redis\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Store: Update a key-value pair to Redis\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"albums\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#albums\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Albums\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Allows users to manage albums. This function exposes a REST API endpoint:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Index: List all albums\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Show: Display details of one album by the album ID\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Store: Create a new album\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"photos\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#photos\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Photos\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Allows users to manage photos. This function exposes a REST API endpoint:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Show: Display details of one photo by its ID\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Store: Create a new photo\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"thumbnail\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#thumbnail\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Thumbnail\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This is a thumbnail generator function implemented using Node.js smartcropjs library. To obtain a thumbnail, POST request the function with application/text header with a Redis key to the image or image Data URI as body, then the function returns a Redis key to the thumbnail or thumbnail Data URI respectively.\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"recognition\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#recognition\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Recognition\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This module is replaced with a Yolov3-tiny model written in PyTorch. It takes a POST request as input, which specifies a list of Redis keys of the images. After the model inference, the function returns an JSON object specifying the locations and confidence levels of each detected object in each image.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"https://i.imgur.com/nafn0RO.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"Figure 2 Uploading a new photo\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"https://i.imgur.com/ht1b24l.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"Figure 3 Creating a new album\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"setupremoval\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#setupremoval\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Setup/Removal\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This project is easily deployable to any Kubernetes clusters. Commands are executed in the project root folder.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Install OpenFaaS in Kubernetes, if not present.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Setup a local docker repository, if not present. Change the repository host in ./stack.yml accordingly. Default is localhost:32000.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Setup the necessary helm services by sh ./scripts/helm-up.sh.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Deploy the serverless functions by faas-cli up.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This project can then be removed with ease.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Remove the serverless functions by faas-cli rm.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Remove the helm services by sh ./script/helm-down.sh.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"(Optional) Remove the local docker repository\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"(Optional) Remove OpenFaaS.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"demonstration\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#demonstration\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Demonstration\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Here we give a simple demonstration of our project.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"After setting everything up, we can login to our web interface by visiting \",[\"$\",\"$L7\",null,{\"children\":\"\u003copenfaas-host\u003e/function/recognition-web\"}],\". We can login by entering a username.\\n\",[\"$\",\"img\",null,{\"src\":\"https://i.imgur.com/a3uG8f6.png\",\"alt\":\"\"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"After logging in, we can see all the albums uploaded under this user.\\n\",[\"$\",\"img\",null,{\"src\":\"https://i.imgur.com/Fihz9Kz.png\",\"alt\":\"\"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We can create a new album by entering an album name and clicking ‘New Album’. Some example images may be found in ./yolov3/data/samples/*.jpg.\\n\",[\"$\",\"img\",null,{\"src\":\"https://i.imgur.com/sw9Mfle.png\",\"alt\":\"\"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We can then upload images to this album. After an image is uploaded, its thumbnail (generated from our thumbnail function), its tags (generated from our yolov3 function) and its upload date are shown.\\n\",[\"$\",\"img\",null,{\"src\":\"https://i.imgur.com/rynZ6Np.png\",\"alt\":\"\"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"By clicking onto the thumbnail, we can see the original image.\\n\",[\"$\",\"img\",null,{\"src\":\"https://i.imgur.com/kpyjA4A.png\",\"alt\":\"\"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We can go back to the main screen and view the created album by clicking ‘Albums’ in the top navigation bar.\\n\",[\"$\",\"img\",null,{\"src\":\"https://i.imgur.com/isfNZHp.png\",\"alt\":\"\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"references\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#references\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"References\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"1: \",[\"$\",\"$L6\",null,{\"href\":\"https://github.com/aws-samples/lambda-refarch-imagerecognition\",\"children\":\"https://github.com/aws-samples/lambda-refarch-imagerecognition\"}]]}]]}]}]]}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"$Lb\",null,{\"attribute\":\"class\",\"defaultTheme\":\"dark\",\"children\":[[\"$\",\"header\",null,{\"id\":\"head\",\"children\":[\"$\",\"header\",null,{\"className\":\"fixed top-0 w-full z-10 shadow-lg\",\"children\":[\"$\",\"nav\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"flex justify-between items-center px-16 bg-nav text-nav-foreground\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"$L6\",null,{\"className\":\"nav-item transition-all hover:bg-foreground/10 title px-3\",\"href\":\"/#home\",\"children\":\"Dipsyland\"}],[\"$\",\"$L6\",null,{\"className\":\"nav-item transition-all hover:bg-foreground/10\",\"href\":\"/#about\",\"children\":\"About Me\"}],[\"$\",\"$L6\",null,{\"className\":\"nav-item transition-all hover:bg-foreground/10\",\"href\":\"/#works\",\"children\":\"Works\"}],[\"$\",\"$L6\",null,{\"className\":\"nav-item transition-all hover:bg-foreground/10\",\"href\":\"/#blog\",\"children\":\"Blog\"}],[\"$\",\"$L6\",null,{\"className\":\"nav-item transition-all hover:bg-foreground/10\",\"href\":\"/#about\",\"children\":\"Contact\"}]]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"$Lc\",null,{}]}]]}]}]}]}],[\"$\",\"main\",null,{\"id\":\"content\",\"children\":[[\"$\",\"div\",null,{\"id\":\"home\"}],[\"$\",\"$Ld\",null,{}],[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}],[\"$\",\"footer\",null,{\"className\":\"bg-background/30 text-foreground backgrop-satuate-100 backdrop-blur-sm shadow py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex justify-between container py-8 items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-col space-y-2\",\"children\":\"Make with love by Dipsy, Copyright© 2024 All Right Reserved\"}],[\"$\",\"div\",null,{\"className\":\"flex space-x-4\",\"children\":[[\"$\",\"$Le\",\"Facebook\",{\"href\":\"//www.facebook.com/FK.twf/\",\"icon\":\"facebook\",\"color\":\"#1877F2\",\"title\":\"Facebook\"}],[\"$\",\"$Le\",\"GitHub\",{\"href\":\"//github.com/dipsywong98\",\"icon\":\"github\",\"color\":\"#181717\",\"title\":\"GitHub\"}],[\"$\",\"$Le\",\"LinkedIn\",{\"href\":\"//www.linkedin.com/in/dipsywong/\",\"icon\":\"linkedin\",\"color\":\"#0077B5\",\"title\":\"LinkedIn\"}],[\"$\",\"$Le\",\"Email\",{\"href\":\"mailto:ycwongal@connect.ust.hk\",\"icon\":\"gmail\",\"color\":\"#D14836\",\"title\":\"Email\"}],[\"$\",\"$Le\",\"YouTube\",{\"href\":\"//www.youtube.com/user/FacebookArmyOffical\",\"icon\":\"youtube\",\"color\":\"#FF0000\",\"title\":\"YouTube\"}]]}]]}]}]]}]]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Lf\"],\"globalErrorComponent\":\"$10\",\"missingSlots\":\"$W11\"}]]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Serverless Smart Album | Dipsyland\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Smart album that auto label photos on cloud\"}],[\"$\",\"link\",\"4\",{\"rel\":\"canonical\",\"href\":\"https://dipsy.me/posts/Serverless-Smart-Album/\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:title\",\"content\":\"Serverless Smart Album\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:description\",\"content\":\"Smart album that auto label photos on cloud\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:url\",\"content\":\"https://dipsy.me/posts/Serverless-Smart-Album/\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"9\",{\"property\":\"article:published_time\",\"content\":\"2019-12-07T00:00:00.000Z\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:title\",\"content\":\"Serverless Smart Album\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:description\",\"content\":\"Smart album that auto label photos on cloud\"}],[\"$\",\"link\",\"13\",{\"rel\":\"icon\",\"href\":\"/icon.png?053fff2283a75f27\",\"type\":\"image/png\",\"sizes\":\"96x96\"}]]\n4:null\n"])</script></body></html>