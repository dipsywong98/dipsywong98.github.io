<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/d1e1d355410e933b.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/70ad82d9738b2543.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-f6d831f5b8f364ac.js"/><script src="/_next/static/chunks/fd9d1056-ad3f9809e3f77200.js" async=""></script><script src="/_next/static/chunks/7023-0789e080c5116e54.js" async=""></script><script src="/_next/static/chunks/main-app-f18ac9dfa8c42f92.js" async=""></script><script src="/_next/static/chunks/231-ba1b85035bca0774.js" async=""></script><script src="/_next/static/chunks/1068-de3bc04ff7214d06.js" async=""></script><script src="/_next/static/chunks/5223-a6dbef85e7ec21e7.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bslug%5D/page-139c95f8011417f7.js" async=""></script><script src="/_next/static/chunks/7053-23fb8929b374fce2.js" async=""></script><script src="/_next/static/chunks/app/layout-b8dd873ce6332ab5.js" async=""></script><script src="/_next/static/chunks/d3ac728e-4f9f0688fd11b799.js" async=""></script><script src="/_next/static/chunks/3158-60beff0974f44667.js" async=""></script><script src="/_next/static/chunks/3530-0259f1a7e7bea590.js" async=""></script><script src="/_next/static/chunks/app/page-45728722d2057448.js" async=""></script><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-2G457C66LH" as="script"/><title>How to test websocket in rust Actix framework | Dipsyland</title><link rel="canonical" href="https://dipsy.me/posts/How-to-test-websocket-in-rust-Actix-framework/"/><meta property="og:title" content="How to test websocket in rust Actix framework"/><meta property="og:url" content="https://dipsy.me/posts/How-to-test-websocket-in-rust-Actix-framework/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2023-04-30T00:00:00.000Z"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="How to test websocket in rust Actix framework"/><link rel="icon" href="/icon.png?053fff2283a75f27" type="image/png" sizes="96x96"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&false)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}else{c.add('dark')}if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'dark'}catch(e){}}()</script><header id="head"><header class="fixed top-0 w-full z-10 shadow-lg"><nav><div class="flex justify-between items-center px-16 bg-nav text-nav-foreground"><div class="flex items-center"><a class="nav-item transition-all hover:bg-foreground/10 title px-3" href="/#home">Dipsyland</a><a class="nav-item transition-all hover:bg-foreground/10" href="/#about">About Me</a><a class="nav-item transition-all hover:bg-foreground/10" href="/#works">Works</a><a class="nav-item transition-all hover:bg-foreground/10" href="/#blog">Blog</a><a class="nav-item transition-all hover:bg-foreground/10" href="/#about">Contact</a></div><div><button type="button" aria-label="Toggle theme" class="group rounded-full bg-white/50 px-3 py-2 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:bg-zinc-800/90 dark:ring-white/10 dark:hover:ring-white/20"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-6 w-6 fill-zinc-80 stroke-zinc-500 transition group-hover:fill-zinc-200 group-hover:stroke-zinc-700 dark:hidden [@media(prefers-color-scheme:dark)]:fill-zinc-50 [@media(prefers-color-scheme:dark)]:stroke-zinc-500 [@media(prefers-color-scheme:dark)]:group-hover:fill-zinc-50 [@media(prefers-color-scheme:dark)]:group-hover:stroke-zinc-600"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon-star hidden h-6 w-6 fill-zinc-700 stroke-zinc-500 transition dark:block [@media(prefers-color-scheme:dark)]:group-hover:stroke-zinc-400 [@media_not_(prefers-color-scheme:dark)]:fill-zinc-400/10 [@media_not_(prefers-color-scheme:dark)]:stroke-zinc-500"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9"></path><path d="M20 3v4"></path><path d="M22 5h-4"></path></svg></button></div></div></nav></header></header><main id="content"><div id="home"></div><div class="dipsyland root-el relative"><div class="container-el fixed w-full overflow-hidden"><div class="background-img sky"></div><div class="background-img cloud" style="margin-left:0px;bottom:-50px"></div><div class="background-img city" style="margin-left:0px;bottom:-50px"></div><div class="background-img grass" style="margin-left:0px;bottom:-50px"></div></div></div><div class="card text-left relative p-20 max-w-4xl min-h-[calc(var(--section-height) - 10rem * 2)] mx-auto my-40 overflow-hidden shadow-xl"><h1>How to test websocket in rust Actix framework</h1><time class="my-4 block text-sm text-zinc-400" dateTime="2023-04-30T00:00:00.000Z">April 30, 2023</time><article class="prose dark:prose-invert max-w-[90ch]"><h1 id="how-to-test-websocket-in-rust-actix-framework"><a href="#how-to-test-websocket-in-rust-actix-framework"><span class="icon icon-link"></span></a></h1>
<p>It is taking a lot of time to research how to properly test websocket in Actix framework, because their docs, googling and ChatGPT didnt give me answers that works for me. I am not sure is it my googling skill problem or not many people are not asking the same problem as what i did, anyway i found the solution inside actix&#x27;s source code. I didnt find that in actix&#x27;s documentation page so i think i better write my findings down and hopefully this can help others who are facing the same problem. First let me share what I have found and what are their problem. Please correct me if my findings are not accurate as I am just a beginner to Rust and Actix.</p>
<ol>
<li>Some are like spinning up a separate server and separete process to test against the server, this will work but not as clean, breakpointing at the server doesnt imply breakpointing in the testing process, there might be side effect for example timeout logic in test etc. And need spin up the server before running test and close the server after that is also a bit cumbersome. But yeah at least most of time just i am not feeling satified yet.</li>
<li>Some are like spinning up a server inside the test case functions. Seems spinning up the server is blocking, so need to spin up the server in separate thread. Then the tests and the server are running concurrently, how ever what if the test started opening the websocket before the server starts accepting connection? This part is a bit tricky and i would rather use the first method. It is because if the test set up is too complicated, when it fails I cannot tell is it the set up failing or server implementation is failing.</li>
</ol>
<h2 id="how-i-found-the-method-i-wanted"><a href="#how-i-found-the-method-i-wanted"><span class="icon icon-link"></span></a>How i found the method i wanted</h2>
<p>So i dig the source code to see if there exists test cases on ws written definitely by Actix developers and i am not disappointed. There is! Source code digging is always the last resort if googling doesnt help. If source code digging didnt work, probably it is impossible to do it in the way you want currently...</p>
<p>So i found the original code in <a href="https://github.com/actix/actix-web/blob/master/actix-web-actors/tests/test_ws.rs">https://github.com/actix/actix-web/blob/master/actix-web-actors/tests/test_ws.rs</a> and i kept only the crutial ones here to demostrate how the test works.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="rust" data-theme="one-dark-pro"><code title="Click to copy" data-language="rust" data-theme="one-dark-pro" style="display:grid"><span data-line=""><span style="color:#7F848E;font-style:italic">//test_ws.rs</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">#[cfg(test)]</span></span>
<span data-line=""><span style="color:#C678DD">mod</span><span style="color:#ABB2BF"> tests_main {</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">    use</span><span style="color:#C678DD"> crate</span><span style="color:#ABB2BF">::create_app; </span><span style="color:#7F848E;font-style:italic">// this is where my server implementation is</span></span>
<span data-line=""><span style="color:#C678DD">    use</span><span style="color:#E5C07B"> actix_http</span><span style="color:#ABB2BF">::ws;</span></span>
<span data-line=""><span style="color:#C678DD">    use</span><span style="color:#E5C07B"> actix_web</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">web</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Bytes</span><span style="color:#ABB2BF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">    use</span><span style="color:#E5C07B"> futures_util</span><span style="color:#ABB2BF">::{</span><span style="color:#E5C07B">SinkExt</span><span style="color:#C678DD"> as</span><span style="color:#ABB2BF"> _, </span><span style="color:#E5C07B">StreamExt</span><span style="color:#C678DD"> as</span><span style="color:#ABB2BF"> _}; </span><span style="color:#7F848E;font-style:italic">// this is needed for send method in Framed</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">    #[actix_web::test]</span></span>
<span data-line=""><span style="color:#C678DD">    async</span><span style="color:#C678DD"> fn</span><span style="color:#61AFEF"> test_websocket1</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">        // this is to create a test server without really make it listening on some port</span></span>
<span data-line=""><span style="color:#C678DD">        let</span><span style="color:#C678DD"> mut</span><span style="color:#E06C75"> srv</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> actix_test</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">start</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">create_app</span><span style="color:#ABB2BF">);</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">        // open a websocket connection to the test server</span></span>
<span data-line=""><span style="color:#C678DD">        let</span><span style="color:#C678DD"> mut</span><span style="color:#E06C75"> framed</span><span style="color:#56B6C2"> =</span><span style="color:#E06C75"> srv</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">ws_at</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;/ws&quot;</span><span style="color:#ABB2BF">).</span><span style="color:#C678DD">await</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">unwrap</span><span style="color:#ABB2BF">();</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">       // send message to the test server through the ws</span></span>
<span data-line=""><span style="color:#E06C75">       framed</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">send</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">ws</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Message</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">Text</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;text&quot;</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">into</span><span style="color:#ABB2BF">())).</span><span style="color:#C678DD">await</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">unwrap</span><span style="color:#ABB2BF">();</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">        // await the server to reply</span></span>
<span data-line=""><span style="color:#C678DD">        let</span><span style="color:#E06C75"> item</span><span style="color:#56B6C2"> =</span><span style="color:#E06C75"> framed</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">next</span><span style="color:#ABB2BF">().</span><span style="color:#C678DD">await</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">unwrap</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">unwrap</span><span style="color:#ABB2BF">();</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">        // assert what the server replied</span></span>
<span data-line=""><span style="color:#61AFEF">        assert_eq!</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">item</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">ws</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Frame</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">Text</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">Bytes</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">from_static</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">b&quot;send: text&quot;</span><span style="color:#ABB2BF">)));</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<p>As for the actual server impl, it is just ordinary websocket implementation available in actix official documentation. <a href="https://actix.rs/docs/websockets/">https://actix.rs/docs/websockets/</a> The only twist is that i extracted the <code title="Click to copy">create_app</code> method so that  we can use the same server factory in our test cases.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282c34;color:#abb2bf" tabindex="0" data-language="rust" data-theme="one-dark-pro"><code title="Click to copy" data-line-numbers="" data-language="rust" data-theme="one-dark-pro" style="display:grid" data-line-numbers-max-digits="2"><span data-line=""><span style="color:#7F848E;font-style:italic">// main.rs</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">use</span><span style="color:#E5C07B"> actix</span><span style="color:#ABB2BF">::{</span><span style="color:#E5C07B">Actor</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">StreamHandler</span><span style="color:#ABB2BF">};</span></span>
<span data-line=""><span style="color:#C678DD">use</span><span style="color:#E5C07B"> actix_http</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">body</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">BoxBody</span><span style="color:#ABB2BF">;</span></span>
<span data-line=""><span style="color:#C678DD">use</span><span style="color:#E5C07B"> actix_web</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">dev</span><span style="color:#ABB2BF">::{</span><span style="color:#E5C07B">ServiceFactory</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">ServiceRequest</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">ServiceResponse</span><span style="color:#ABB2BF">};</span></span>
<span data-line=""><span style="color:#C678DD">use</span><span style="color:#E5C07B"> actix_web</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Error</span><span style="color:#ABB2BF">;</span></span>
<span data-line=""><span style="color:#C678DD">use</span><span style="color:#E5C07B"> actix_web</span><span style="color:#ABB2BF">::{web, </span><span style="color:#E5C07B">App</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">HttpRequest</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">HttpResponse</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">HttpServer</span><span style="color:#ABB2BF">};</span></span>
<span data-line=""><span style="color:#C678DD">use</span><span style="color:#E5C07B"> actix_web_actors</span><span style="color:#ABB2BF">::ws;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">struct</span><span style="color:#E5C07B"> MyWs</span><span style="color:#ABB2BF">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">impl</span><span style="color:#E5C07B"> Actor</span><span style="color:#C678DD"> for</span><span style="color:#E5C07B"> MyWs</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">    type</span><span style="color:#E5C07B"> Context</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> ws</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">WebsocketContext</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">Self</span><span style="color:#ABB2BF">&gt;;</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">/// Handler for ws::Message message</span></span>
<span data-line=""><span style="color:#C678DD">impl</span><span style="color:#E5C07B"> StreamHandler</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">Result</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">ws</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Message</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">ws</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">ProtocolError</span><span style="color:#ABB2BF">&gt;&gt; </span><span style="color:#C678DD">for</span><span style="color:#E5C07B"> MyWs</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">    fn</span><span style="color:#61AFEF"> handle</span><span style="color:#ABB2BF">(&amp;</span><span style="color:#C678DD">mut</span><span style="color:#E5C07B"> self</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">msg</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">Result</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">ws</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Message</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">ws</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">ProtocolError</span><span style="color:#ABB2BF">&gt;, </span><span style="color:#E06C75">ctx</span><span style="color:#ABB2BF">: &amp;</span><span style="color:#C678DD">mut</span><span style="color:#E5C07B"> Self</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Context</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">        match</span><span style="color:#E06C75"> msg</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E5C07B">            Ok</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">ws</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Message</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">Ping</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">msg</span><span style="color:#ABB2BF">)) =&gt; </span><span style="color:#E06C75">ctx</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">pong</span><span style="color:#ABB2BF">(&amp;</span><span style="color:#E06C75">msg</span><span style="color:#ABB2BF">),</span></span>
<span data-line=""><span style="color:#E5C07B">            Ok</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">ws</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Message</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">Text</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">text</span><span style="color:#ABB2BF">)) =&gt; </span><span style="color:#E06C75">ctx</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">text</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">format!</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;send: {}&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">text</span><span style="color:#ABB2BF">)),</span></span>
<span data-line=""><span style="color:#E5C07B">            Ok</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">ws</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Message</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">Binary</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">bin</span><span style="color:#ABB2BF">)) =&gt; </span><span style="color:#E06C75">ctx</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">binary</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">bin</span><span style="color:#ABB2BF">),</span></span>
<span data-line=""><span style="color:#E06C75">            _</span><span style="color:#ABB2BF"> =&gt; (),</span></span>
<span data-line=""><span style="color:#ABB2BF">        }</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">async</span><span style="color:#C678DD"> fn</span><span style="color:#61AFEF"> index</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">req</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">HttpRequest</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">stream</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">web</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Payload</span><span style="color:#ABB2BF">) -&gt; </span><span style="color:#E5C07B">Result</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">HttpResponse</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">Error</span><span style="color:#ABB2BF">&gt; {</span></span>
<span data-line=""><span style="color:#C678DD">    let</span><span style="color:#E06C75"> resp</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> ws</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">start</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">MyWs</span><span style="color:#ABB2BF"> {}, &amp;</span><span style="color:#E06C75">req</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">stream</span><span style="color:#ABB2BF">);</span></span>
<span data-line=""><span style="color:#61AFEF">    println!</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;{:?}&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">resp</span><span style="color:#ABB2BF">);</span></span>
<span data-line=""><span style="color:#E06C75">    resp</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">pub</span><span style="color:#C678DD"> fn</span><span style="color:#61AFEF"> create_app</span><span style="color:#ABB2BF">() -&gt; </span><span style="color:#E5C07B">App</span><span style="color:#ABB2BF">&lt;</span></span>
<span data-line=""><span style="color:#C678DD">    impl</span><span style="color:#E5C07B"> ServiceFactory</span><span style="color:#ABB2BF">&lt;</span></span>
<span data-line=""><span style="color:#E5C07B">        ServiceRequest</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#E5C07B">        Response</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> ServiceResponse</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">BoxBody</span><span style="color:#ABB2BF">&gt;,</span></span>
<span data-line=""><span style="color:#E5C07B">        Config</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> (),</span></span>
<span data-line=""><span style="color:#E5C07B">        InitError</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> (),</span></span>
<span data-line=""><span style="color:#E5C07B">        Error</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> Error</span><span style="color:#ABB2BF">,</span></span>
<span data-line=""><span style="color:#ABB2BF">    &gt;,</span></span>
<span data-line=""><span style="color:#ABB2BF">&gt; {</span></span>
<span data-line=""><span style="color:#E5C07B">    App</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">new</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">route</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;/ws&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">web</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">to</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">index</span><span style="color:#ABB2BF">))</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">#[actix_web::main]</span></span>
<span data-line=""><span style="color:#C678DD">async</span><span style="color:#C678DD"> fn</span><span style="color:#61AFEF"> main</span><span style="color:#ABB2BF">() -&gt; </span><span style="color:#E5C07B">std</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">io</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Result</span><span style="color:#ABB2BF">&lt;()&gt; {</span></span>
<span data-line=""><span style="color:#E5C07B">    HttpServer</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">new</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">create_app</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">bind</span><span style="color:#ABB2BF">((</span><span style="color:#98C379">&quot;127.0.0.1&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">8080</span><span style="color:#ABB2BF">))?</span></span>
<span data-line=""><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">run</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">        .</span><span style="color:#C678DD">await</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">mod</span><span style="color:#ABB2BF"> test_ws;</span></span></code></pre></figure>
<p>I hope this write up can help with your project. Good luck!</p>
<p>A full working repo is here, it also includes test case for ordinary restful endpoints, CI, pre-commit-hooks and more. Check it out if you are interested! <a href="https://github.com/dipsywong98/actix-test">https://github.com/dipsywong98/actix-test</a></p></article></div><footer class="bg-background/30 text-foreground backgrop-satuate-100 backdrop-blur-sm shadow py-8"><div class="flex justify-between container py-8 items-center"><div class="flex flex-col space-y-2">Make with love by Dipsy, CopyrightÂ© 2024 All Right Reserved</div><div class="flex space-x-4"><div class="tooltip-root"><div class="title" style="opacity:0">Facebook</div><a href="//www.facebook.com/FK.twf/"><img alt="icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/svg/facebook.svg"/></a></div><div class="tooltip-root"><div class="title" style="opacity:0">GitHub</div><a href="//github.com/dipsywong98"><img alt="icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/svg/github.svg"/></a></div><div class="tooltip-root"><div class="title" style="opacity:0">LinkedIn</div><a href="//www.linkedin.com/in/dipsywong/"><img alt="icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/svg/linkedin.svg"/></a></div><div class="tooltip-root"><div class="title" style="opacity:0">Email</div><a href="mailto:ycwongal@connect.ust.hk"><img alt="icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/svg/gmail.svg"/></a></div><div class="tooltip-root"><div class="title" style="opacity:0">YouTube</div><a href="//www.youtube.com/user/FacebookArmyOffical"><img alt="icon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/svg/youtube.svg"/></a></div></div></div></footer></main><script src="/_next/static/chunks/webpack-f6d831f5b8f364ac.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/d1e1d355410e933b.css\",\"style\"]\n2:HL[\"/_next/static/css/70ad82d9738b2543.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[95751,[],\"\"]\n5:I[50316,[\"231\",\"static/chunks/231-ba1b85035bca0774.js\",\"1068\",\"static/chunks/1068-de3bc04ff7214d06.js\",\"5223\",\"static/chunks/5223-a6dbef85e7ec21e7.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-139c95f8011417f7.js\"],\"WidgetsRoot\"]\n6:I[231,[\"231\",\"static/chunks/231-ba1b85035bca0774.js\",\"1068\",\"static/chunks/1068-de3bc04ff7214d06.js\",\"5223\",\"static/chunks/5223-a6dbef85e7ec21e7.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-139c95f8011417f7.js\"],\"\"]\n7:I[32741,[\"231\",\"static/chunks/231-ba1b85035bca0774.js\",\"1068\",\"static/chunks/1068-de3bc04ff7214d06.js\",\"5223\",\"static/chunks/5223-a6dbef85e7ec21e7.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-139c95f8011417f7.js\"],\"Code\"]\n8:I[39275,[],\"\"]\na:I[61343,[],\"\"]\nb:I[64404,[\"231\",\"static/chunks/231-ba1b85035bca0774.js\",\"7053\",\"static/chunks/7053-23fb8929b374fce2.js\",\"5223\",\"static/chunks/5223-a6dbef85e7ec21e7.js\",\"3185\",\"static/chunks/app/layout-b8dd873ce6332ab5.js\"],\"GoogleAnalytics\"]\nc:I[82650,[\"231\",\"static/chunks/231-ba1b85035bca0774.js\",\"7053\",\"static/chunks/7053-23fb8929b374fce2.js\",\"5223\",\"static/chunks/5223-a6dbef85e7ec21e7.js\",\"3185\",\"static/chunks/app/layout-b8dd873ce6332ab5.js\"],\"ThemeProvider\"]\nd:I[50558,[\"231\",\"static/chunks/231-ba1b85035bca0774.js\",\"7053\",\"static/chunks/7053-23fb8929b374fce2.js\",\"5223\",\"static/chunks/5223-a6dbef85e7ec21e7.js\",\"3185\",\"static/chunks/app/layout-b8dd873ce6332ab5.js\"],\"default\"]\ne:I[40289,[\"231\",\"static/chunks/231-ba1b85035bca0774.js\",\"7053\",\"static/chunks/7053-23fb8929b374fce2.js\",\"5223\",\"static/chunks/5223-a6dbef85e7ec21e7.js\",\"3185\",\"static/chunks/app/layout-b8dd873ce6332ab5.js\"],\"Dipsyland\"]\nf:I[22810,[\"3954\",\"static/chunks/d3ac728e-4f9f0688fd11b799.js\",\"3158\",\"static/chunks/3158-60beff0974f44667.js\",\"7053\",\"static/chunks/7053-23fb8929b374fce2.js\",\"3530\",\"static/chunks/3530-0259f1a7e7bea590.js\",\"1931\",\"static/chunks/app/page-45728722d2057448.js\"],\"SvgLink\"]\n11:I[76130,[],\"\"]\n9:[\"slug\",\"How-to-test-websocket-in-rust-Actix-framework\",\"d\"]\n12:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d1e1d355410e933b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/70ad82d9738b2543.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"yEwgQc7H0Y9KXGaW3Auqk\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/How-to-test-websocket-in-rust-Actix-framework/\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"How-to-test-websocket-in-rust-Actix-framework\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"How-to-test-websocket-in-rust-Actix-framework\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"How-to-test-websocket-in-rust-Actix-framework\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"div\",null,{\"className\":\"card text-left relative p-20 max-w-4xl min-h-[calc(var(--section-height) - 10rem * 2)] mx-auto my-40 overflow-hidden shadow-xl\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"How to test websocket in rust Actix framework\"}],[\"$\",\"time\",null,{\"className\":\"my-4 block text-sm text-zinc-400\",\"dateTime\":\"2023-04-30T00:00:00.000Z\",\"children\":\"April 30, 2023\"}],[\"$\",\"article\",null,{\"className\":\"prose dark:prose-invert max-w-[90ch]\",\"children\":[\"$\",\"$L5\",null,{\"children\":[[\"$\",\"h1\",null,{\"id\":\"how-to-test-websocket-in-rust-actix-framework\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#how-to-test-websocket-in-rust-actix-framework\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"It is taking a lot of time to research how to properly test websocket in Actix framework, because their docs, googling and ChatGPT didnt give me answers that works for me. I am not sure is it my googling skill problem or not many people are not asking the same problem as what i did, anyway i found the solution inside actix's source code. I didnt find that in actix's documentation page so i think i better write my findings down and hopefully this can help others who are facing the same problem. First let me share what I have found and what are their problem. Please correct me if my findings are not accurate as I am just a beginner to Rust and Actix.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Some are like spinning up a separate server and separete process to test against the server, this will work but not as clean, breakpointing at the server doesnt imply breakpointing in the testing process, there might be side effect for example timeout logic in test etc. And need spin up the server before running test and close the server after that is also a bit cumbersome. But yeah at least most of time just i am not feeling satified yet.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Some are like spinning up a server inside the test case functions. Seems spinning up the server is blocking, so need to spin up the server in separate thread. Then the tests and the server are running concurrently, how ever what if the test started opening the websocket before the server starts accepting connection? This part is a bit tricky and i would rather use the first method. It is because if the test set up is too complicated, when it fails I cannot tell is it the set up failing or server implementation is failing.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"how-i-found-the-method-i-wanted\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"#how-i-found-the-method-i-wanted\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"How i found the method i wanted\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"So i dig the source code to see if there exists test cases on ws written definitely by Actix developers and i am not disappointed. There is! Source code digging is always the last resort if googling doesnt help. If source code digging didnt work, probably it is impossible to do it in the way you want currently...\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"So i found the original code in \",[\"$\",\"$L6\",null,{\"href\":\"https://github.com/actix/actix-web/blob/master/actix-web-actors/tests/test_ws.rs\",\"children\":\"https://github.com/actix/actix-web/blob/master/actix-web-actors/tests/test_ws.rs\"}],\" and i kept only the crutial ones here to demostrate how the test works.\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#282c34\",\"color\":\"#abb2bf\"},\"tabIndex\":\"0\",\"data-language\":\"rust\",\"data-theme\":\"one-dark-pro\",\"children\":[\"$\",\"$L7\",null,{\"data-language\":\"rust\",\"data-theme\":\"one-dark-pro\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"//test_ws.rs\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"#[cfg(test)]\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"mod\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" tests_main {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"    use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\" crate\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::create_app; \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"// this is where my server implementation is\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"    use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" actix_http\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::ws;\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"    use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" actix_web\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"web\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Bytes\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"    use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" futures_util\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::{\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"SinkExt\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\" as\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" _, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"StreamExt\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\" as\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" _}; \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"// this is needed for send method in Framed\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    #[actix_web::test]\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"    async\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\" fn\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\" test_websocket1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"() {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"        // this is to create a test server without really make it listening on some port\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"        let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\" mut\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\" srv\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" actix_test\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"start\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"create_app\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\");\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"        // open a websocket connection to the test server\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"        let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\" mut\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\" framed\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\" srv\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"ws_at\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"/ws\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\").\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"await\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unwrap\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"       // send message to the test server through the ws\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"       framed\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"send\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Message\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"Text\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"text\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"into\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"())).\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"await\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unwrap\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"        // await the server to reply\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"        let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\" item\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\" framed\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"next\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"await\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unwrap\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"unwrap\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"        // assert what the server replied\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"        assert_eq!\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"item\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Frame\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"Text\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Bytes\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"from_static\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"b\\\"send: text\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")));\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"As for the actual server impl, it is just ordinary websocket implementation available in actix official documentation. \",[\"$\",\"$L6\",null,{\"href\":\"https://actix.rs/docs/websockets/\",\"children\":\"https://actix.rs/docs/websockets/\"}],\" The only twist is that i extracted the \",[\"$\",\"$L7\",null,{\"children\":\"create_app\"}],\" method so that  we can use the same server factory in our test cases.\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#282c34\",\"color\":\"#abb2bf\"},\"tabIndex\":\"0\",\"data-language\":\"rust\",\"data-theme\":\"one-dark-pro\",\"children\":[\"$\",\"$L7\",null,{\"data-line-numbers\":\"\",\"data-language\":\"rust\",\"data-theme\":\"one-dark-pro\",\"style\":{\"display\":\"grid\"},\"data-line-numbers-max-digits\":\"2\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"// main.rs\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" actix\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::{\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Actor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"StreamHandler\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"};\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" actix_http\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"body\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"BoxBody\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" actix_web\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"dev\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::{\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ServiceFactory\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ServiceRequest\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ServiceResponse\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"};\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" actix_web\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" actix_web\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::{web, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"App\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"HttpRequest\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"HttpResponse\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"HttpServer\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"};\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" actix_web_actors\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::ws;\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"struct\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" MyWs\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"impl\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" Actor\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\" for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" MyWs\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"    type\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" Context\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"WebsocketContext\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003e;\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#7F848E\",\"fontStyle\":\"italic\"},\"children\":\"/// Handler for ws::Message message\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"impl\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" StreamHandler\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Message\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ProtocolError\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003e\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" MyWs\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"    fn\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\" handle\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\u0026\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"mut\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"msg\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Message\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ProtocolError\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003e, \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"ctx\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \u0026\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"mut\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" Self\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Context\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\") {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"        match\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\" msg\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"            Ok\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Message\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"Ping\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"msg\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")) =\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"ctx\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"pong\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\u0026\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"msg\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"            Ok\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Message\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"Text\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"text\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")) =\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"ctx\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"text\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"format!\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"send: {}\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"text\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"            Ok\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Message\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"Binary\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"bin\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")) =\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"ctx\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"binary\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"bin\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"            _\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" =\u003e (),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\" fn\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\" index\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"req\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"HttpRequest\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"stream\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"web\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Payload\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\") -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"HttpResponse\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003e {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"    let\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\" resp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" ws\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"start\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"MyWs\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" {}, \u0026\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"req\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"stream\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\");\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"    println!\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"{:?}\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"resp\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\");\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"    resp\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"pub\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\" fn\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\" create_app\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"() -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"App\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003c\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"    impl\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" ServiceFactory\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003c\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"        ServiceRequest\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"        Response\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" ServiceResponse\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"BoxBody\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003e,\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"        Config\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"        InitError\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" (),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"        Error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#56B6C2\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\" Error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"    \u003e,\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003e {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"    App\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"route\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"/ws\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"web\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"get\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"to\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"index\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"#[actix_web::main]\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"async\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\" fn\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\" main\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"() -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"std\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"io\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"Result\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"\u003c()\u003e {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E5C07B\"},\"children\":\"    HttpServer\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E06C75\"},\"children\":\"create_app\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"bind\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#98C379\"},\"children\":\"\\\"127.0.0.1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#D19A66\"},\"children\":\"8080\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"))?\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#61AFEF\"},\"children\":\"run\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"        .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"await\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#C678DD\"},\"children\":\"mod\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ABB2BF\"},\"children\":\" test_ws;\"}]]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"I hope this write up can help with your project. Good luck!\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"A full working repo is here, it also includes test case for ordinary restful endpoints, CI, pre-commit-hooks and more. Check it out if you are interested! \",[\"$\",\"$L6\",null,{\"href\":\"https://github.com/dipsywong98/actix-test\",\"children\":\"https://github.com/dipsywong98/actix-test\"}]]}]]}]}]]}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"$Lb\",null,{\"gaId\":\"G-2G457C66LH\"}],[\"$\",\"$Lc\",null,{\"attribute\":\"class\",\"defaultTheme\":\"dark\",\"children\":[[\"$\",\"header\",null,{\"id\":\"head\",\"children\":[\"$\",\"header\",null,{\"className\":\"fixed top-0 w-full z-10 shadow-lg\",\"children\":[\"$\",\"nav\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"flex justify-between items-center px-16 bg-nav text-nav-foreground\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"$L6\",null,{\"className\":\"nav-item transition-all hover:bg-foreground/10 title px-3\",\"href\":\"/#home\",\"children\":\"Dipsyland\"}],[\"$\",\"$L6\",null,{\"className\":\"nav-item transition-all hover:bg-foreground/10\",\"href\":\"/#about\",\"children\":\"About Me\"}],[\"$\",\"$L6\",null,{\"className\":\"nav-item transition-all hover:bg-foreground/10\",\"href\":\"/#works\",\"children\":\"Works\"}],[\"$\",\"$L6\",null,{\"className\":\"nav-item transition-all hover:bg-foreground/10\",\"href\":\"/#blog\",\"children\":\"Blog\"}],[\"$\",\"$L6\",null,{\"className\":\"nav-item transition-all hover:bg-foreground/10\",\"href\":\"/#about\",\"children\":\"Contact\"}]]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"$Ld\",null,{}]}]]}]}]}]}],[\"$\",\"main\",null,{\"id\":\"content\",\"children\":[[\"$\",\"div\",null,{\"id\":\"home\"}],[\"$\",\"$Le\",null,{}],[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}],[\"$\",\"footer\",null,{\"className\":\"bg-background/30 text-foreground backgrop-satuate-100 backdrop-blur-sm shadow py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex justify-between container py-8 items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-col space-y-2\",\"children\":\"Make with love by Dipsy, CopyrightÂ© 2024 All Right Reserved\"}],[\"$\",\"div\",null,{\"className\":\"flex space-x-4\",\"children\":[[\"$\",\"$Lf\",\"Facebook\",{\"href\":\"//www.facebook.com/FK.twf/\",\"icon\":\"facebook\",\"color\":\"#1877F2\",\"title\":\"Facebook\"}],[\"$\",\"$Lf\",\"GitHub\",{\"href\":\"//github.com/dipsywong98\",\"icon\":\"github\",\"color\":\"#181717\",\"title\":\"GitHub\"}],[\"$\",\"$Lf\",\"LinkedIn\",{\"href\":\"//www.linkedin.com/in/dipsywong/\",\"icon\":\"linkedin\",\"color\":\"#0077B5\",\"title\":\"LinkedIn\"}],[\"$\",\"$Lf\",\"Email\",{\"href\":\"mailto:ycwongal@connect.ust.hk\",\"icon\":\"gmail\",\"color\":\"#D14836\",\"title\":\"Email\"}],[\"$\",\"$Lf\",\"YouTube\",{\"href\":\"//www.youtube.com/user/FacebookArmyOffical\",\"icon\":\"youtube\",\"color\":\"#FF0000\",\"title\":\"YouTube\"}]]}]]}]}]]}]]}]]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$L10\"],\"globalErrorComponent\":\"$11\",\"missingSlots\":\"$W12\"}]]\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"How to test websocket in rust Actix framework | Dipsyland\"}],[\"$\",\"link\",\"3\",{\"rel\":\"canonical\",\"href\":\"https://dipsy.me/posts/How-to-test-websocket-in-rust-Actix-framework/\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"How to test websocket in rust Actix framework\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:url\",\"content\":\"https://dipsy.me/posts/How-to-test-websocket-in-rust-Actix-framework/\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"7\",{\"property\":\"article:published_time\",\"content\":\"2023-04-30T00:00:00.000Z\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:title\",\"content\":\"How to test websocket in rust Actix framework\"}],[\"$\",\"link\",\"10\",{\"rel\":\"icon\",\"href\":\"/icon.png?053fff2283a75f27\",\"type\":\"image/png\",\"sizes\":\"96x96\"}]]\n4:null\n"])</script></body></html>