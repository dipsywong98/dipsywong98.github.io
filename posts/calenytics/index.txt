2:I[50316,["231","static/chunks/231-ba1b85035bca0774.js","1068","static/chunks/1068-de3bc04ff7214d06.js","5223","static/chunks/5223-a6dbef85e7ec21e7.js","333","static/chunks/app/posts/%5Bslug%5D/page-139c95f8011417f7.js"],"WidgetsRoot"]
3:I[231,["231","static/chunks/231-ba1b85035bca0774.js","1068","static/chunks/1068-de3bc04ff7214d06.js","5223","static/chunks/5223-a6dbef85e7ec21e7.js","333","static/chunks/app/posts/%5Bslug%5D/page-139c95f8011417f7.js"],""]
4:I[39275,[],""]
6:I[61343,[],""]
7:I[64404,["231","static/chunks/231-ba1b85035bca0774.js","7053","static/chunks/7053-23fb8929b374fce2.js","5223","static/chunks/5223-a6dbef85e7ec21e7.js","3185","static/chunks/app/layout-b8dd873ce6332ab5.js"],"GoogleAnalytics"]
8:I[82650,["231","static/chunks/231-ba1b85035bca0774.js","7053","static/chunks/7053-23fb8929b374fce2.js","5223","static/chunks/5223-a6dbef85e7ec21e7.js","3185","static/chunks/app/layout-b8dd873ce6332ab5.js"],"ThemeProvider"]
9:I[50558,["231","static/chunks/231-ba1b85035bca0774.js","7053","static/chunks/7053-23fb8929b374fce2.js","5223","static/chunks/5223-a6dbef85e7ec21e7.js","3185","static/chunks/app/layout-b8dd873ce6332ab5.js"],"default"]
a:I[40289,["231","static/chunks/231-ba1b85035bca0774.js","7053","static/chunks/7053-23fb8929b374fce2.js","5223","static/chunks/5223-a6dbef85e7ec21e7.js","3185","static/chunks/app/layout-b8dd873ce6332ab5.js"],"Dipsyland"]
b:I[22810,["3954","static/chunks/d3ac728e-4f9f0688fd11b799.js","3158","static/chunks/3158-60beff0974f44667.js","7053","static/chunks/7053-23fb8929b374fce2.js","3530","static/chunks/3530-0259f1a7e7bea590.js","1931","static/chunks/app/page-45728722d2057448.js"],"SvgLink"]
5:["slug","calenytics","d"]
0:["yEwgQc7H0Y9KXGaW3Auqk",[[["",{"children":["posts",{"children":[["slug","calenytics","d"],{"children":["__PAGE__?{\"slug\":\"calenytics\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["posts",{"children":[["slug","calenytics","d"],{"children":["__PAGE__",{},[["$L1",["$","div",null,{"className":"card text-left relative p-20 max-w-4xl min-h-[calc(var(--section-height) - 10rem * 2)] mx-auto my-40 overflow-hidden shadow-xl","children":[["$","h1",null,{"children":"calenytics - 算帳日曆"}],["$","time",null,{"className":"my-4 block text-sm text-zinc-400","dateTime":"2023-03-04T00:00:00.000Z","children":"March 4, 2023"}],["$","article",null,{"className":"prose dark:prose-invert max-w-[90ch]","children":["$","$L2",null,{"children":[["$","p",null,{"children":["$","$L3",null,{"href":"https://calenytics.dipsy.me","children":["$","div",null,{"children":[["$","img",null,{"alt":"alt text","className":"rounded-lg mb-0 max-h-[30vh]","src":"/img/calenytics%20-%20%E7%AE%97%E5%B8%B3%E6%97%A5%E6%9B%86/image.png"}],false]}]}]}],"\n",["$","p",null,{"children":["live at ",["$","$L3",null,{"href":"https://calenytics.dipsy.me","children":"https://calenytics.dipsy.me"}]]}],"\n",["$","h2",null,{"id":"story","children":[["$","$L3",null,{"href":"#story","children":["$","span",null,{"className":"icon icon-link"}]}],"Story"]}],"\n",["$","p",null,{"children":"My brother is a freelance musician and he wants to organise his schedule and income well, so I make this tools to convert a google calendar into a google spreadsheet, tally all the income from all events. Events in calendar can include some custom tags, for example my brother can put what instrument he was playing at the event, and then he can analyse which instrument brings him the best income."}],"\n",["$","h2",null,{"id":"technology","children":[["$","$L3",null,{"href":"#technology","children":["$","span",null,{"className":"icon icon-link"}]}],"Technology"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Next.js - it is easy to use, align with my toolchains, easy horizontal scale, can be easily hosted with free vercel hosting service. Can even switch to self host or other hosting services easily."}],"\n",["$","li",null,{"children":"MongoDB - it has cloud free tier, and our data volume is very small, only one collection for holding the linkage between calendar and sheet and sync configuration, which the document is small as well, so even if many users using will still not be a problem"}],"\n",["$","li",null,{"children":"Google API (Calender, Sheet, Service Account) - using service account because setting up Google APP has too much overhead for this small project and have usage limit of 100 users. And in user perspective, users have a granular control and high visibility on which data the service account can access."}],"\n",["$","li",null,{"children":"Github Action - free service to run tests and schedule cron job"}],"\n"]}],"\n",["$","h2",null,{"id":"working-principles","children":[["$","$L3",null,{"href":"#working-principles","children":["$","span",null,{"className":"icon icon-link"}]}],"Working principles"]}],"\n",["$","p",null,{"children":"First, users need to register their calendar and sheet to link them. They will need to grant Calenytics service account for accesss. And we will verify whether they are the actual owner of the calendar and sheet. The linkage and verification state is store in a mongo collection, and upon verification we register webhook on the calendar."}],"\n",["$","p",null,{"children":"When user edit their calendar, it trigger our webhook, we will parse the calendar and put update to their google sheet. In their google sheet, they can on their own set up formulars or charts to analyse their events. We do not own or further process their data to limit our scope. A limitation of webhook is that, it only notifies us there is an update in the calendar, without telling us which part is updated. So everytime we can only process the whole calendar and dump everything into google sheet. This may have a risk to break the execution time limit in the vercel free hosting if the calendar is too big."}],"\n",["$","p",null,{"children":"As google webhook only live for 24 hours, we have a cron job to refresh webhooks every day."}]]}]}]]}]],null],null]},["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children","$5","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"en","children":["$","body",null,{"children":[["$","$L7",null,{"gaId":"G-2G457C66LH"}],["$","$L8",null,{"attribute":"class","defaultTheme":"dark","children":[["$","header",null,{"id":"head","children":["$","header",null,{"className":"fixed top-0 w-full z-10 shadow-lg","children":["$","nav",null,{"children":["$","div",null,{"className":"flex justify-between items-center px-16 bg-nav text-nav-foreground","children":[["$","div",null,{"className":"flex items-center","children":[["$","$L3",null,{"className":"nav-item transition-all hover:bg-foreground/10 title px-3","href":"/#home","children":"Dipsyland"}],["$","$L3",null,{"className":"nav-item transition-all hover:bg-foreground/10","href":"/#about","children":"About Me"}],["$","$L3",null,{"className":"nav-item transition-all hover:bg-foreground/10","href":"/#works","children":"Works"}],["$","$L3",null,{"className":"nav-item transition-all hover:bg-foreground/10","href":"/#blog","children":"Blog"}],["$","$L3",null,{"className":"nav-item transition-all hover:bg-foreground/10","href":"/#about","children":"Contact"}]]}],["$","div",null,{"children":["$","$L9",null,{}]}]]}]}]}]}],["$","main",null,{"id":"content","children":[["$","div",null,{"id":"home"}],["$","$La",null,{}],["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}],["$","footer",null,{"className":"bg-background/30 text-foreground backgrop-satuate-100 backdrop-blur-sm shadow py-8","children":["$","div",null,{"className":"flex justify-between container py-8 items-center","children":[["$","div",null,{"className":"flex flex-col space-y-2","children":"Make with love by Dipsy, Copyright© 2024 All Right Reserved"}],["$","div",null,{"className":"flex space-x-4","children":[["$","$Lb","Facebook",{"href":"//www.facebook.com/FK.twf/","icon":"facebook","color":"#1877F2","title":"Facebook"}],["$","$Lb","GitHub",{"href":"//github.com/dipsywong98","icon":"github","color":"#181717","title":"GitHub"}],["$","$Lb","LinkedIn",{"href":"//www.linkedin.com/in/dipsywong/","icon":"linkedin","color":"#0077B5","title":"LinkedIn"}],["$","$Lb","Email",{"href":"mailto:ycwongal@connect.ust.hk","icon":"gmail","color":"#D14836","title":"Email"}],["$","$Lb","YouTube",{"href":"//www.youtube.com/user/FacebookArmyOffical","icon":"youtube","color":"#FF0000","title":"YouTube"}]]}]]}]}]]}]]}]]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/d1e1d355410e933b.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/70ad82d9738b2543.css","precedence":"next","crossOrigin":"$undefined"}]],"$Lc"]]]]
c:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"calenytics - 算帳日曆 | Dipsyland"}],["$","meta","3",{"name":"description","content":"Turn your Google Calendar into income balance spreadsheet. Set up once, synced forever."}],["$","link","4",{"rel":"canonical","href":"https://dipsy.me/posts/calenytics/"}],["$","meta","5",{"property":"og:title","content":"calenytics - 算帳日曆"}],["$","meta","6",{"property":"og:description","content":"Turn your Google Calendar into income balance spreadsheet. Set up once, synced forever."}],["$","meta","7",{"property":"og:url","content":"https://dipsy.me/posts/calenytics/"}],["$","meta","8",{"property":"og:type","content":"article"}],["$","meta","9",{"property":"article:published_time","content":"2023-03-04T00:00:00.000Z"}],["$","meta","10",{"name":"twitter:card","content":"summary"}],["$","meta","11",{"name":"twitter:title","content":"calenytics - 算帳日曆"}],["$","meta","12",{"name":"twitter:description","content":"Turn your Google Calendar into income balance spreadsheet. Set up once, synced forever."}],["$","link","13",{"rel":"icon","href":"/icon.png?053fff2283a75f27","type":"image/png","sizes":"96x96"}]]
1:null
